<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>index (bernard_j_ortcutt.index)</title><link rel="stylesheet" href="../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ bernard_j_ortcutt</nav><h1 id="bernard-j.-ortcutt"><a href="#bernard-j.-ortcutt" class="anchor"></a>Bernard J. Ortcutt</h1><p><i>Full module documentation: <a href="Bernard_j_ortcutt/index.html"><code>Bernard_j_ortcutt</code></a></i></p><p>Bernard J. Ortcutt is a Reddit bot for assisted moderation. It is configured to watch for items that moderators have reported with special command strings and then perform pre-arranged actions corresponding to those commands.</p><p>For example, suppose we want to be able to remove links or comments when they violate a rule of a subreddit and notify the author that this has happened. We could provide the following configuration:</p><pre><code class="ml">((info &quot;Removed (Rule 1)&quot;)
 (trigger ((commands (&quot;rule 1&quot;)) (kinds (link comment))))
 (actions (Remove (Notify (text &quot;Please do not break rule 1&quot;)))))</code></pre><p>We can then report a link or comment with the reason &quot;rule 1&quot; and the bot will</p><ol><li>Remove the post; and</li><li>Leave a distinguished reply asking the user not to break the rule.</li></ol><nav class="toc"><ul><li><a href="#configuration">Configuration</a></li><li><a href="#usage">Usage</a></li></ul></nav></header><h2 id="configuration"><a href="#configuration" class="anchor"></a>Configuration</h2><p>Bernard uses s-expresssions for configuration, and this documentation presupposes familiarity with <a href="https://github.com/janestreet/ppx_sexp_conv">ppx_sexp_conv's</a> conventions for serializing OCaml values.</p><p>The configuration for a subreddit is simply a list of rules. Consult the <a href="Bernard_j_ortcutt/Rule/index.html#type-t"><code>Bernard_j_ortcutt.Rule.t</code></a> type, as well as the <a href="Bernard_j_ortcutt/Rule/Trigger/index.html#type-t"><code>Bernard_j_ortcutt.Rule.Trigger.t</code></a> and <a href="Bernard_j_ortcutt/Action/index.html#type-t"><code>Bernard_j_ortcutt.Action.t</code></a> types referenced therein, for the complete structure of possible configurations.</p><h2 id="usage"><a href="#usage" class="anchor"></a>Usage</h2><p>Bernard requires three command line parameters:</p><ul><li><p><code>-credentials</code></p><p>A file containing a sexp-ified <span class="xref-unresolved" title="unresolved reference to &quot;Reddit_api_async.Connection.Credentials.t&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Reddit_api_async.Connection.Credentials&quot;"><span class="xref-unresolved" title="unresolved reference to &quot;Reddit_api_async.Connection&quot;"><code>Reddit_api_async</code>.Connection</span>.Credentials</span>.t</span>.</p></li><li><p><code>-database</code></p><p>A PostgreSQL database, which can be created with the included <code>create_tables.sql</code>.</p></li><li><p><code>-subreddits</code></p><p>A directory whose files are named <code>&lt;subreddit&gt;.sexp</code>, where each subreddit is a subreddit that Bernard will moderate and the file contents are a series of sexp-ified rules.</p></li></ul></div></body></html>